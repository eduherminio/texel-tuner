// 2024-8-12 13:37:35  51

#pragma once
#include <array>
#include "lynx_tunable.hpp"

constexpr static std::array<std::array<int, 12>, PSQTBucketCount> PieceValue = {
    {
        {
            +72, +320, +265, +428, +1025,  // (0) - bucket 0
            +115, +417, +327, +755, +1288, // (0) - bucket 0
        },
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGamePawnTable = {
    {
        {
            0, 0, 0, 0, 0, 0, 0, 0,
            -126, -170, -90, -89, -185, -113, -152, -168,
            39, 92, 116, 93, 110, 38, -14, -11,
            39, 108, 50, 38, 41, 11, -2, -29,
            45, 70, 55, 56, 29, 3, -19, -40,
            35, 64, 58, 10, 5, -9, -24, -44,
            19, 110, 63, -9, 0, -18, -35, -49,
            0, 0, 0, 0, 0, 0, 0, 0 //

        },
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGamePawnTable = {
    {
        {
            0, 0, 0, 0, 0, 0, 0, 0,
            66, 32, 8, -62, -16, -65, -85, 6,
            64, 73, 6, -25, -57, -10, 58, 79,
            -8, 9, 3, -6, -17, 11, 23, 49,
            -37, -11, -9, -8, -15, -0, 4, 19,
            -57, -27, -13, 8, -1, -5, 6, 15,
            -78, -15, 7, 57, -25, 14, 13, 21,
            0, 0, 0, 0, 0, 0, 0, 0 //

        },
 
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGameKnightTable = {
    {
        {
            -287, -129, 13, -163, -126, -238, 45, -275,
            94, 5, 8, 145, 145, 35, -14, 38,
            1, 67, 137, 80, 113, 89, 49, -9,
            20, 103, 94, 111, 53, 42, 14, -48,
            23, 39, 71, 64, 41, 24, 55, -30,
            5, 0, 35, 18, 29, 3, -35, -45,
            -18, 3, 40, 6, -18, -56, 33, -106,
            33, -18, -77, -21, -19, -50, -124, -119 //
        },
 
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGameKnightTable = {
    {
        {
            -10, -28, -23, 58, 64, 56, -137, -89,
            -44, -114, 22, 1, -20, 23, 10, 0,
            -9, -7, -1, 67, 17, 5, -38, 23,
            -27, -18, 38, 36, 65, 54, 40, 22,
            6, 9, 49, 60, 67, 54, -4, 11,
            -36, 1, 31, 39, 39, 28, 26, 3,
            -32, -20, -10, 10, 12, 14, -48, 1,
            -87, -9, 2, -45, -9, -23, -36, -142 //
        },

    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGameBishopTable = {
    {
        {
            -4, -125, -80, -302, -84, -168, -210, -105,
            -3, -77, 3, 0, -126, -19, 76, -64,
            8, 73, 52, 114, 30, 5, 10, 19,
            14, 42, 12, 35, 77, 35, 2, -16,
            13, 34, 25, 79, 23, -6, -1, -20,
            88, 21, 31, 38, -2, -19, 7, 2,
            76, 75, 24, 27, -15, 9, -4, 10,
            146, 40, 29, 31, -2, -35, 45, 9 //
        },
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGameBishopTable = {
    {
        {
            25, 16, 35, 85, 79, 37, 103, 131,
            -61, 39, -36, 8, 22, 39, -79, 52,
            20, -10, -17, -31, -19, 22, 35, 9,
            -24, -8, -10, 18, -26, 13, 18, 35,
            6, 5, 6, -31, 13, 10, 18, -20,
            -54, 7, -19, -20, -5, 15, -35, -2,
            -60, -49, -8, -44, 16, -44, 14, 31,
            -103, -14, -14, -27, -19, -16, -38, -37 //
        },

    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGameRookTable = {
    {
        {
            -95, -110, 63, 42, -7, -22, -12, 70,
            105, 86, 97, 67, 46, 102, 50, 36,
            -68, 21, 27, 28, 53, -1, -5, 30,
            2, 90, 50, 13, 13, -10, 4, -13,
            -60, 59, -35, -16, -18, -7, -56, -35,
            -94, -6, -19, -0, -37, -32, -29, -107,
            -3, -4, 10, -39, -37, -15, -33, -57,
            -39, -1, 5, 7, -5, -9, -13, -25 //
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGameRookTable = {
    {
        {
            36, 81, 19, -10, 39, 41, 46, 16,
            -58, -16, 13, -9, 15, -32, -1, 12,
            -8, -4, 14, -4, -12, -9, -16, 3,
            -33, -27, -17, 5, 2, -6, 23, -3,
            -16, -8, 28, 25, 32, 5, 21, 19,
            -38, -11, -2, -13, 2, 8, 18, 30,
            -96, -4, 7, 24, 13, -11, 21, -3,
            -42, -15, -18, -17, -16, -28, -11, -3 //
        },
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGameQueenTable = {
    {
        {
            112, 27, -81, -79, -7, 31, -11, 32,
            2, 90, -60, -22, -46, 14, 9, -19,
            45, 50, 7, -47, -36, 33, 59, 35,
            8, 45, 50, -10, 10, 13, -8, 2,
            1, 56, -22, 21, 13, -4, -23, -71,
            -20, 5, 15, -16, -3, -24, 10, -55,
            -40, 3, 11, 10, -0, 15, 6, -33,
            -69, -13, -35, -6, 5, 25, -0, -10 //
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGameQueenTable = {
    {
        {
            -16, 10, 105, 128, -0, 12, 16, -3,
            13, -16, 86, 84, 83, 37, 2, 46,
            -15, 2, 66, 110, 25, -24, -40, -9,
            54, 46, -14, 17, 49, -24, 43, 26,
            31, -16, 36, -23, 7, -18, -37, 44,
            -8, 8, -17, -18, -15, -15, -38, 64,
            -195, -49, -28, -15, -47, -50, -52, -2,
            -115, -28, -19, -28, -58, -119, -98, 21 //
}
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGameKingTable = {
    {
        {
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            -254, 0, 0, 0, 0, 0, 0, 0,
            -247, 0, 0, 0, 0, 0, 0, 0 //
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGameKingTable = {
    {
        {
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            4, 0, 0, 0, 0, 0, 0, 0,
            -26, 0, 0, 0, 0, 0, 0, 0 //
        },
    }};

constexpr static std::array<std::array<int, 12>, PSQTBucketCount> EnemyPieceValue = {
    {
        {
            +72, +320, +265, +428, +1025,  // (0) - bucket 0
            +115, +417, +327, +755, +1288, // (0) - bucket 0
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGameEnemyPawnTable = {
    {
        {
            0, 0, 0, 0, 0, 0, 0, 0,
            -126, -170, -90, -89, -185, -113, -152, -168,
            39, 92, 116, 93, 110, 38, -14, -11,
            39, 108, 50, 38, 41, 11, -2, -29,
            45, 70, 55, 56, 29, 3, -19, -40,
            35, 64, 58, 10, 5, -9, -24, -44,
            19, 110, 63, -9, 0, -18, -35, -49,
            0, 0, 0, 0, 0, 0, 0, 0 //

        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGameEnemyPawnTable = {
    {
        {
            0, 0, 0, 0, 0, 0, 0, 0,
            66, 32, 8, -62, -16, -65, -85, 6,
            64, 73, 6, -25, -57, -10, 58, 79,
            -8, 9, 3, -6, -17, 11, 23, 49,
            -37, -11, -9, -8, -15, -0, 4, 19,
            -57, -27, -13, 8, -1, -5, 6, 15,
            -78, -15, 7, 57, -25, 14, 13, 21,
            0, 0, 0, 0, 0, 0, 0, 0 //

        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGameEnemyKnightTable = {
    {
        {
            -287, -129, 13, -163, -126, -238, 45, -275,
            94, 5, 8, 145, 145, 35, -14, 38,
            1, 67, 137, 80, 113, 89, 49, -9,
            20, 103, 94, 111, 53, 42, 14, -48,
            23, 39, 71, 64, 41, 24, 55, -30,
            5, 0, 35, 18, 29, 3, -35, -45,
            -18, 3, 40, 6, -18, -56, 33, -106,
            33, -18, -77, -21, -19, -50, -124, -119 //
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGameEnemyKnightTable = {
    {
        {
            -10, -28, -23, 58, 64, 56, -137, -89,
            -44, -114, 22, 1, -20, 23, 10, 0,
            -9, -7, -1, 67, 17, 5, -38, 23,
            -27, -18, 38, 36, 65, 54, 40, 22,
            6, 9, 49, 60, 67, 54, -4, 11,
            -36, 1, 31, 39, 39, 28, 26, 3,
            -32, -20, -10, 10, 12, 14, -48, 1,
            -87, -9, 2, -45, -9, -23, -36, -142 //
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGameEnemyBishopTable = {
    {
        {
            -4, -125, -80, -302, -84, -168, -210, -105,
            -3, -77, 3, 0, -126, -19, 76, -64,
            8, 73, 52, 114, 30, 5, 10, 19,
            14, 42, 12, 35, 77, 35, 2, -16,
            13, 34, 25, 79, 23, -6, -1, -20,
            88, 21, 31, 38, -2, -19, 7, 2,
            76, 75, 24, 27, -15, 9, -4, 10,
            146, 40, 29, 31, -2, -35, 45, 9 //
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGameEnemyBishopTable = {
    {
        {
            25, 16, 35, 85, 79, 37, 103, 131,
            -61, 39, -36, 8, 22, 39, -79, 52,
            20, -10, -17, -31, -19, 22, 35, 9,
            -24, -8, -10, 18, -26, 13, 18, 35,
            6, 5, 6, -31, 13, 10, 18, -20,
            -54, 7, -19, -20, -5, 15, -35, -2,
            -60, -49, -8, -44, 16, -44, 14, 31,
            -103, -14, -14, -27, -19, -16, -38, -37 //
        },
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGameEnemyRookTable = {
    {
        {
            -95, -110, 63, 42, -7, -22, -12, 70,
            105, 86, 97, 67, 46, 102, 50, 36,
            -68, 21, 27, 28, 53, -1, -5, 30,
            2, 90, 50, 13, 13, -10, 4, -13,
            -60, 59, -35, -16, -18, -7, -56, -35,
            -94, -6, -19, -0, -37, -32, -29, -107,
            -3, -4, 10, -39, -37, -15, -33, -57,
            -39, -1, 5, 7, -5, -9, -13, -25 //
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGameEnemyRookTable = {
    {
        {
            36, 81, 19, -10, 39, 41, 46, 16,
            -58, -16, 13, -9, 15, -32, -1, 12,
            -8, -4, 14, -4, -12, -9, -16, 3,
            -33, -27, -17, 5, 2, -6, 23, -3,
            -16, -8, 28, 25, 32, 5, 21, 19,
            -38, -11, -2, -13, 2, 8, 18, 30,
            -96, -4, 7, 24, 13, -11, 21, -3,
            -42, -15, -18, -17, -16, -28, -11, -3 //
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGameEnemyQueenTable = {
    {
        {
            112, 27, -81, -79, -7, 31, -11, 32,
            2, 90, -60, -22, -46, 14, 9, -19,
            45, 50, 7, -47, -36, 33, 59, 35,
            8, 45, 50, -10, 10, 13, -8, 2,
            1, 56, -22, 21, 13, -4, -23, -71,
            -20, 5, 15, -16, -3, -24, 10, -55,
            -40, 3, 11, 10, -0, 15, 6, -33,
            -69, -13, -35, -6, 5, 25, -0, -10 //
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGameEnemyQueenTable = {
    {
        {
            -16, 10, 105, 128, -0, 12, 16, -3,
            13, -16, 86, 84, 83, 37, 2, 46,
            -15, 2, 66, 110, 25, -24, -40, -9,
            54, 46, -14, 17, 49, -24, 43, 26,
            31, -16, 36, -23, 7, -18, -37, 44,
            -8, 8, -17, -18, -15, -15, -38, 64,
            -195, -49, -28, -15, -47, -50, -52, -2,
            -115, -28, -19, -28, -58, -119, -98, 21 //
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> MiddleGameEnemyKingTable = {
    {
        {
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            -254, 0, 0, 0, 0, 0, 0, 0,
            -247, 0, 0, 0, 0, 0, 0, 0 //
        }
    }};

constexpr static std::array<std::array<int, 64>, PSQTBucketCount> EndGameEnemyKingTable = {
    {
        {
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            4, 0, 0, 0, 0, 0, 0, 0,
            -26, 0, 0, 0, 0, 0, 0, 0 //
        }
    }};

TunableSingle IsolatedPawnPenalty(-19, -15);
TunableSingle OpenFileRookBonus(41, 7);
TunableSingle SemiOpenFileRookBonus(14, 11);
TunableSingle QueenMobilityBonus(1, 12);
TunableSingle SemiOpenFileKingPenalty(-22, 7);
TunableSingle OpenFileKingPenalty(-84, 4);
TunableSingle KingShieldBonus(24, -7);
TunableSingle BishopPairBonus(30, 81);

TunableSingle PieceProtectedByPawnBonus(9, 10);
TunableSingle PieceAttackedByPawnPenalty(-40, -29);

TunableArray PassedPawnBonus(
    chess::PieceType::PAWN,
    std::vector<int>{0, 7, -1, 1, 25, 34, 234, 0},
    std::vector<int>{0, 15, 22, 45, 70, 129, 269, 0},
    1,
    1);

TunableArray VirtualKingMobilityBonus(
    chess::PieceType::QUEEN,
    std::vector<int>{0, 0, 0, -12, 13, 14, 19, 22, 20, 19, 17, 15, 17, 13, 6, -2, -8, -14, -20, -21, -10, -1, -1, 11, -3, 24, -14, 17},
    std::vector<int>{0, 0, 0, 74, 45, 43, 31, 18, 17, 14, 13, 14, 8, 8, 7, 7, 3, -2, -5, -13, -22, -30, -38, -48, -56, -73, -78, -93},
    0,
    0);

TunableArray KnightMobilityBonus(
    chess::PieceType::KNIGHT,
    std::vector<int>{0, 11, 16, 20, 22, 20, 18, 18, 18},
    std::vector<int>{0, -1, 15, 15, 19, 23, 22, 20, 14},
    0,
    0);

TunableArray BishopMobilityBonus(
    chess::PieceType::BISHOP,
    std::vector<int>{-247, 0, 39, 43, 57, 62, 75, 84, 91, 91, 95, 99, 99, 119, 0},
    std::vector<int>{-213, 0, 63, 106, 128, 143, 163, 172, 184, 191, 197, 197, 200, 197, 0},
    0,
    1);

TunableArray RookMobilityBonus(
    chess::PieceType::ROOK,
    std::vector<int>{0, 9, 14, 19, 18, 24, 26, 28, 29, 31, 34, 37, 37, 53, 50},
    std::vector<int>{0, 21, 26, 29, 35, 38, 43, 47, 54, 59, 61, 63, 66, 62, 57},
    0,
    0);
